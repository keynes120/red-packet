webpackJsonp([6],{210:function(t,e,n){"use strict";function i(t){s||n(811)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(431),l=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var r=n(818),d=n.n(r),s=!1,c=n(0),p=i,u=c(l.a,d.a,!1,p,null,null);u.options.__file="src/views/file-manager/file-manager-upload.vue",e.default=u.exports},431:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(813),l=i(a),o=n(814),r=i(o),d=n(47),s=i(d);e.default={name:"file-upload",components:{canEditTable:r.default},data:function(){return{defaultList:[{name:"a42bdcc1178e62b4694c830f028db5c0",url:"https://o5wwk8baw.qnssl.com/a42bdcc1178e62b4694c830f028db5c0/avatar"},{name:"bc7521e033abdd1e92222d733590f104",url:"https://o5wwk8baw.qnssl.com/bc7521e033abdd1e92222d733590f104/avatar"}],imgName:"",visible:!1,uploadList:[],columnsList:[],tableData:[]}},methods:{getData:function(){this.columnsList=l.default.table1Columns,this.getUploadFiles()},handleFormatError:function(t){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+t.name+" 格式不正确，请pdf或excel文件。"+t.size+","+t.type})},handleBeforeUpload:function(t){this.$Notice.warning({title:"文件准备上传",desc:"文件 "+t.name+" 准备上传。"})},handleProgress:function(t,e){this.$Notice.info({title:"文件正在上传",desc:"文件 "+e.name+" 正在上传。"})},handleSuccess:function(t,e){this.$Notice.success({title:"文件上传成功",desc:"文件 "+e.name+" 上传成功。"});var n="{filename: '"+e.name+"',filetype: ' "+e.type+"',fileSize: '"+e.size+"',uploadTime: '2018-07-08'}";alert(n),l.default.table1Data.push(n),this.getData()},handleError:function(t,e){this.$Notice.error({title:"文件上传",desc:"文件 "+e.name+" 上传失败。"})},handleView:function(t){this.imgName=t,this.visible=!0},handleMaxSize:function(t){this.$Notice.warning({title:"超出文件大小限制",desc:"文件 "+t.name+" 太大，不能超过 2M。"})},handleDel:function(){console.log("delete one line data")},getUploadFiles:function(){s.default.get("http://localhost:8081/getUploadedFiles").then(function(t){console.log(t.data),this.tableData=t.data,console.log(this.table1Data)})}},created:function(){console.log("reload data"),this.getData()},mounted:function(){this.uploadList=this.$refs.upload.fileList}}},432:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(26),a=function(t){return t&&t.__esModule?t:{default:t}}(i),l=function(t,e,n,i){return e("Button",{props:{type:n.editting?"success":"primary",loading:n.saving},style:{margin:"0 5px"},on:{click:function(){if(n.editting){t.edittingStore[i].saving=!0,t.thisTableData=JSON.parse((0,a.default)(t.edittingStore));var e=t.edittingStore[i];e.editting=!1,e.saving=!1,t.thisTableData=JSON.parse((0,a.default)(t.edittingStore)),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-change",t.handleBackdata(t.thisTableData),i)}else{if(n.edittingCell)for(var l in n.edittingCell)n.edittingCell[l]=!1,t.edittingStore[i].edittingCell[l]=!1;t.edittingStore[i].editting=!0,t.thisTableData=JSON.parse((0,a.default)(t.edittingStore))}}}},n.editting?"保存":"编辑")},o=function(t,e,n,i){return e("Button",{props:{type:n.editting?"success":"primary",loading:n.saving},style:{margin:"0 5px"},on:{click:function(){if(n.editting){t.edittingStore[i].saving=!0,t.thisTableData=JSON.parse((0,a.default)(t.edittingStore));var e=t.edittingStore[i];e.editting=!1,e.saving=!1,t.thisTableData=JSON.parse((0,a.default)(t.edittingStore)),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-change",t.handleBackdata(t.thisTableData),i)}else{if(n.edittingCell)for(var l in n.edittingCell)n.edittingCell[l]=!1,t.edittingStore[i].edittingCell[l]=!1;t.edittingStore[i].editting=!0,t.thisTableData=JSON.parse((0,a.default)(t.edittingStore))}}}},"下载")},r=function(t,e,n,i){return e("Button",{props:{type:n.editting?"success":"primary",loading:n.saving},style:{margin:"0 5px"},on:{click:function(){if(n.editting){t.edittingStore[i].saving=!0,t.thisTableData=JSON.parse((0,a.default)(t.edittingStore));var e=t.edittingStore[i];e.editting=!1,e.saving=!1,t.thisTableData=JSON.parse((0,a.default)(t.edittingStore)),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-change",t.handleBackdata(t.thisTableData),i)}else{if(n.edittingCell)for(var l in n.edittingCell)n.edittingCell[l]=!1,t.edittingStore[i].edittingCell[l]=!1;t.edittingStore[i].editting=!0,t.thisTableData=JSON.parse((0,a.default)(t.edittingStore))}}}},"详情")},d=function(t,e,n,i){return e("Button",{props:{type:n.editting?"success":"primary",loading:n.saving},style:{margin:"0 5px"},on:{click:function(){if(n.editting){t.edittingStore[i].saving=!0,t.thisTableData=JSON.parse((0,a.default)(t.edittingStore));var e=t.edittingStore[i];e.editting=!1,e.saving=!1,t.thisTableData=JSON.parse((0,a.default)(t.edittingStore)),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-change",t.handleBackdata(t.thisTableData),i)}else{if(n.edittingCell)for(var l in n.edittingCell)n.edittingCell[l]=!1,t.edittingStore[i].edittingCell[l]=!1;t.edittingStore[i].editting=!0,t.thisTableData=JSON.parse((0,a.default)(t.edittingStore))}}}},"修改")},s=function(t,e,n,i){return e("Poptip",{props:{confirm:!0,title:"您确定要删除这条数据吗?",transfer:!0},on:{"on-ok":function(){t.thisTableData.splice(i,1),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-delete",t.handleBackdata(t.thisTableData),i)}}},[e("Button",{style:{margin:"0 5px"},props:{type:"error",placement:"top"}},"删除")])},c=function(t,e,n){return t.hoverShow?e("div",{class:{"show-edit-btn":t.hoverShow}},[e("Button",{props:{type:"text",icon:"edit"},on:{click:function(e){t.edittingStore[n.index].edittingCell[n.column.key]=!0,t.thisTableData=JSON.parse((0,a.default)(t.edittingStore))}}})]):e("Button",{props:{type:"text",icon:"edit"},on:{click:function(e){t.edittingStore[n.index].edittingCell[n.column.key]=!0,t.thisTableData=JSON.parse((0,a.default)(t.edittingStore))}}})},p=function(t,e,n){return e("Button",{props:{type:"text",icon:"checkmark"},on:{click:function(e){t.edittingStore[n.index].edittingCell[n.column.key]=!1,t.thisTableData=JSON.parse((0,a.default)(t.edittingStore)),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-cell-change",t.handleBackdata(t.thisTableData),n.index,n.column.key)}}})},u=function(t,e,n,i){return e("Input",{props:{type:"text",value:t.edittingStore[n.index][i.key]},on:{"on-change":function(e){var a=i.key;t.edittingStore[n.index][a]=e.target.value}}})};e.default={name:"canEditTable",props:{refs:String,columnsList:Array,value:Array,url:String,editIncell:{type:Boolean,default:!1},hoverShow:{type:Boolean,default:!1}},data:function(){return{columns:[],thisTableData:[],edittingStore:[]}},created:function(){this.init()},methods:{init:function(){var t=this,e=this,n=this.columnsList.filter(function(t){if(t.editable&&!0===t.editable)return t}),i=JSON.parse((0,a.default)(this.value)),g=[];g=i.map(function(e,i){var a=!1;if(t.thisTableData[i])if(t.thisTableData[i].editting)a=!0;else for(var l in t.thisTableData[i].edittingCell)!0===t.thisTableData[i].edittingCell[l]&&(a=!0);if(a)return t.thisTableData[i];t.$set(e,"editting",!1);var o={};return n.forEach(function(t){o[t.key]=!1}),t.$set(e,"edittingCell",o),e}),this.thisTableData=g,this.edittingStore=JSON.parse((0,a.default)(this.thisTableData)),this.columnsList.forEach(function(n){n.editable&&(n.render=function(i,a){var l=t.thisTableData[a.index];return l.editting?i("Input",{props:{type:"text",value:l[n.key]},on:{"on-change":function(t){var n=a.column.key;e.edittingStore[a.index][n]=t.target.value}}}):t.editIncell?i("Row",{props:{type:"flex",align:"middle",justify:"center"}},[i("Col",{props:{span:"22"}},[l.edittingCell[a.column.key]?u(t,i,a,n):i("span",l[n.key])]),i("Col",{props:{span:"2"}},[l.edittingCell[a.column.key]?p(t,i,a):c(t,i,a)])]):i("span",l[n.key])}),n.handle&&(n.render=function(e,i){var a=t.thisTableData[i.index],c=[];return n.handle.forEach(function(n){"edit"===n?c.push(l(t,e,a,i.index)):"delete"===n?c.push(s(t,e,0,i.index)):"download"===n?c.push(o(t,e,a,i.index)):"detail"===n?c.push(r(t,e,a,i.index)):"update"===n&&c.push(d(t,e,a,i.index))}),e("div",c)})})},handleBackdata:function(t){var e=JSON.parse((0,a.default)(t));return e.forEach(function(t){delete t.editting,delete t.edittingCell,delete t.saving}),e}},watch:{value:function(t){this.init()}}}},811:function(t,e,n){var i=n(812);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(9)("46cf0b9c",i,!1,{})},812:function(t,e,n){e=t.exports=n(8)(!1),e.push([t.i,"\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.admin-upload-list {\n  display: inline-block;\n  width: 60px;\n  height: 60px;\n  text-align: center;\n  line-height: 60px;\n  border: 1px solid transparent;\n  border-radius: 4px;\n  overflow: hidden;\n  background: #fff;\n  position: relative;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);\n  margin-right: 4px;\n}\n.admin-upload-list img {\n  width: 100%;\n  height: 100%;\n}\n.admin-upload-list-cover {\n  display: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.6);\n}\n.admin-upload-list:hover .admin-upload-list-cover {\n  display: block;\n}\n.admin-upload-list-cover i {\n  color: #fff;\n  font-size: 20px;\n  cursor: pointer;\n  margin: 0 2px;\n}\n",""])},813:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=e.table1Columns=[{title:"序号",type:"index",width:80,align:"center"},{title:"文件名称",align:"center",key:"filename",editable:!0},{title:"文件类型",align:"center",key:"filetype"},{title:"文件大小",align:"center",key:"fileSize",editable:!0},{title:"上传日期",align:"center",key:"uploadTime",editable:!0},{title:"操作",align:"center",width:120,key:"handle",handle:["download"]}],a=e.table2Columns=[{title:"专利编号",align:"center",key:"patentNumber"},{title:"类型",align:"center",key:"type"},{title:"专利名称",align:"center",key:"patentName"},{title:"申请号",align:"center",key:"applyNumber"},{title:"申请日",align:"center",key:"applyDate"},{title:"公开号",align:"center",key:"publishNumber"},{title:"公开日",align:"center",key:"publishDate"},{title:"申请公司",align:"center",key:"applyCompany"},{title:"发明人",align:"center",key:"author"},{title:"状态",align:"center",key:"patentStatus"},{title:"操作",align:"center",width:120,key:"handle",handle:["detail","update"]}],l=e.table1Data=[{filename:"十二五规划纲要",filetype:"pdf",fileSize:"2M",uploadTime:"2018-07-08"},{filename:"十二五规划纲要",filetype:"pdf",fileSize:"2M",uploadTime:"2018-07-08"},{filename:"十二五规划纲要",filetype:"pdf",fileSize:"2M",uploadTime:"2018-07-08"}],o=e.table2Data=[{patentNumber:"CN102577946A",type:"发明公开",patentName:"大麦花药快速培养法及所用培养基123456",applyNumber:"CN201210024418.7",applyDate:"2012-02-01 T16:00:00.000Z",publishNumber:"CN102577946A",publishDate:"2012-02-01 T16:00:00.000Z",applyCompany:"浙江省农业科学院",author:"张三、李四、王老五",patentStatus:"有效专利"}],r={table1Columns:i,table1Data:l,table2Columns:a,table2Data:o};e.default=r},814:function(t,e,n){"use strict";function i(t){s||n(815)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(432),l=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var r=n(817),d=n.n(r),s=!1,c=n(0),p=i,u=c(l.a,d.a,!1,p,null,null);u.options.__file="src/views/file-manager/canEditTable.vue",e.default=u.exports},815:function(t,e,n){var i=n(816);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(9)("50f51eec",i,!1,{})},816:function(t,e,n){e=t.exports=n(8)(!1),e.push([t.i,"\n.show-edit-btn {\n  display: none;\n  margin-left: -10px;\n}\n.ivu-table-cell:hover .show-edit-btn {\n  display: inline-block;\n}\n",""])},817:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Table",{ref:t.refs,attrs:{columns:t.columnsList,data:t.thisTableData,border:"","disabled-hover":""}})],1)},a=[];i._withStripped=!0;var l={render:i,staticRenderFns:a};e.default=l},818:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",[n("Col",{attrs:{span:"24"}},[n("div",{staticClass:"margin-top-10"},[n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[n("Icon",{attrs:{type:"android-hand"}}),t._v("\n                        可拖拽上传\n                    ")],1),t._v(" "),n("div",{staticClass:"height-30px"},[n("Upload",{attrs:{multiple:"",type:"drag","max-size":5120,format:["pdf","xls","xlsx"],"on-format-error":t.handleFormatError,"on-success":t.handleSuccess,"show-upload-list":"","on-error":t.handleError,action:"//"}},[n("div",{staticStyle:{padding:"60px 0",height:"200px"}},[n("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),t._v(" "),n("p",[t._v("点击或将文件拖拽到这里上传")])],1)])],1)])],1)])],1),t._v(" "),n("Row",{staticClass:"margin-top-10"},[n("Col",{attrs:{span:"24"}},[n("Card",[n("div",{staticClass:"edittable-con-1"},[n("can-edit-table",{attrs:{refs:"table1","columns-list":t.columnsList},on:{"on-delete":t.handleDel},model:{value:t.tableData,callback:function(e){t.tableData=e},expression:"tableData"}})],1)])],1)],1)],1)},a=[];i._withStripped=!0;var l={render:i,staticRenderFns:a};e.default=l}});